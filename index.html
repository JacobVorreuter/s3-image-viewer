<html>
  <head>
    <style>
      body {
        font-family: "Helvetica Neue", helvetica, arial;
        padding: 15px;
      }

      #images {
        margin: 0;
        padding: 0;
        width: 600px;
      }

      .image-cell {
        float: left;
        padding: 10px;
      }
    </style>

    <script>
      var host = location.origin.replace(/^http/, 'ws')
      var ws = new WebSocket(host);
      var marker = '';

      function load_images() {
        document.querySelector('#images').innerHTML = '';
        ws.send(marker);
        ws.onmessage = function (event) {
          var image_data = JSON.parse(event.data);
          marker = image_data.Marker;
          var img = document.createElement('img');
          img.src = 'data:image/jpeg;base64, ' + image_data.Body;
          img.className = 'image-cell';
          img.alt = image_data.Modified;
          document.querySelector('#images').appendChild(img);
        };
      }

      ws.onopen = function (event) {
        load_images();
      };
    </script>
  </head>
  <body>
    <a href="javascript:void(0)" onclick="load_images();">LOAD NEXT</a></br>
    <div id='images'></div>
  </body>
</html>
